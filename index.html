<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Maze3D</title>
    <style>
    body {
        color: #ffffff;
        font-family:Monospace;
        font-size:13px;
        text-align:center;
        font-weight: bold;

        background-color: #000000;
        margin: 0px;
        overflow: hidden;
    }

    </style>
</head>
<body>
    
    <script src="three.min.js"></script>

    <script>

    var camera,
        scene,
        renderer,
        geometry,
        material,
        mesh,
        sphere,
        pointLight,
        plane,
        plane2,
        plane3,
        plane4,
        center;
    
    var mouseX = 0,
        mouseY = 0,
        mouseZ = 0;

    var angleY=0;
    var angleX=0;

    var windowHalfX = window.innerWidth / 2;
    var windowHalfY = window.innerHeight / 2;
    var incrementoX = Math.PI/(windowHalfX);
    var incrementoY = Math.PI/(windowHalfY);

    init();
    animate();

    function init() {
        
        scene = new THREE.Scene();

        camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 1, 10000);
        camera.position.z = 1000;

        window.center = new THREE.Vector3(0, 0, 0);

        geometry = new THREE.CubeGeometry(200, 200, 200);
        geometrySphere = new THREE.SphereGeometry(75, 16, 16);
        material = new THREE.MeshBasicMaterial({color: 0x00FF00, wireframe: true, side: THREE.DoubleSide});
        geometryPlane = new THREE.PlaneGeometry(1000, 1000, 10, 10);
        geometryPlaneBasic = new THREE.PlaneGeometry(50, 50, 10, 10);

        mesh = new THREE.Mesh(geometry, material);
        sphere = new THREE.Mesh(geometrySphere, new THREE.MeshBasicMaterial({color: 0x009900, wireframe: false}));
        sphere.position.z = 2000;
        
        plane = new THREE.Mesh(geometryPlane, new THREE.MeshBasicMaterial({color: 0x5566ff, wireframe: true, side: THREE.DoubleSide}));
        plane.rotation.x = -1.5;
        plane.position.y = -140;

        plane2 = new THREE.Mesh(geometryPlane, new THREE.MeshBasicMaterial({color: 0x5566ff, wireframe: true, side: THREE.DoubleSide}));
        plane2.rotation.x = 1.5;
        plane2.position.y = 140;

        plane3 = new THREE.Mesh(geometryPlaneBasic, new THREE.MeshBasicMaterial({color: 0xff66ff, wireframe: true, side: THREE.DoubleSide}));
        plane3.position.z=1000;
        plane3.position.y=-500;
        plane3.rotation.x = -Math.PI/2;

        plane4 = new THREE.Mesh(geometryPlaneBasic, new THREE.MeshBasicMaterial({color: 0xffffff, wireframe: true, side: THREE.DoubleSide}));
        plane4.position.z=1000;
        plane4.position.y=500;
        plane4.rotation.x = -Math.PI/2;

        scene.add(mesh);
        scene.add(sphere);
        scene.add(plane);
        scene.add(plane2);
        scene.add(plane3);
        scene.add(plane4);

        //addiding some light to the scene
        pointLight = new THREE.DirectionalLight( 0xffffff );
        pointLight.position.set( 0, 0, 1 ).normalize();

        scene.add(pointLight);
        

        renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        window.camera = camera;
        document.body.appendChild(renderer.domElement);
        document.addEventListener('mousemove', onDocumentMouseMove, false);
        document.addEventListener('keydown', onDocumentKeyDown, false);

    };

    function onDocumentMouseMove(e) {
        difference = mouseX-e.clientX;
        angleX-=incrementoX*difference;

        mouseX = e.clientX;

        //x movement ok
        e.preventDefault();
    };
    function onDocumentKeyDown(e){
        var keyCode = e.which||e.keyCode;
        console.log(keyCode);
        if(keyCode == 87){
            camera.translateZ(-10);
        }
        if(keyCode == 68){
            camera.translateX(10);
        }
        if(keyCode == 83){
            camera.translateZ(10);
        }
        if(keyCode == 65){
            camera.translateX(-10);
        }
    };

    function animate() {
        if(mouseX<=100){
            angleX-=incrementoX*5;
        }
        if(mouseX>=windowHalfX*2-100){
            angleX+=incrementoX*5;
        }
        center.x = windowHalfX*2*Math.cos(angleX);
        center.z = windowHalfX*2*Math.sin(angleX);
        console.log(angleX);

        requestAnimationFrame(animate);

        mesh.rotation.x += 0.01;
        mesh.rotation.y += 0.02;
        sphere.rotation.y -= 0.01;
        
        //camera.position.x += (mouseX - camera.position.x) * 0.05;
        //camera.position.y += (-mouseY - camera.position.y) * 0.05;
        camera.lookAt(center);
        renderer.render(scene, camera);

    };

    </script>
</body>
</html>